---
title: "Cyclistic Bike-Share Case Study"
author: "Deepa Subramani"
date: "`r Sys.Date()`"
output: html_document
---

# Introduction
This case study analyzes how **Cyclistic**, a Chicago-based bike-share company, can convert casual riders into annual members.  
We will explore differences in usage patterns between casual riders and annual members using Cyclistic’s trip data.

---

# Business Task
The business task is to determine:  
**How do annual members and casual riders use Cyclistic bikes differently?**  

This analysis will guide marketing strategies aimed at increasing annual memberships.

---

# Prepare
We will use Cyclistic’s historical trip data provided by Motivate International Inc.  
- Data source: [Divvy Trip Data](https://divvy-tripdata.s3.amazonaws.com/index.html)  
- Time frame: 2019 Q1 to 2020 Q1 (12 months)  

Key considerations:  
- Data is reliable and public.  
- Personally identifiable information (PII) is excluded for privacy.  

---

```{r install &Load required package , include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
install.packages("tidyverse")
library(tidyverse)
library(lubridate)
```


```{r Loading the Dataset}
# Example: Load CSV files
trip_data <- read.csv("Divvy_Trips_2020_Q1.csv")

# Inspect data
glimpse(trip_data)

```
```{r Process}

# Standardize column names
colnames(trip_data)

# Convert started_at and ended_at to datetime
trip_data <- trip_data %>% mutate(started_at = ymd_hms(started_at) , ended_at = ymd_hms(ended_at))

# create new calculated fields for ride duration and days of the trip

trip_data <- trip_data %>% mutate(ride_length =as.numeric(difftime(ended_at, started_at, units = "mins")),day_of_week = wday(started_at, label = TRUE))

# Remove bad data ex : 1) no missing date 2) remove rides <1 min or >24 hrs

trip_data_clean <- trip_data %>% 
  filter(!is.na(started_at) & !is.na(ended_at)) %>%
  filter(ride_length > 1 & ride_length < 1440) %>% distinct()


# Save cleaned data into CSV

write_csv(trip_data_clean , "cyclistic_data_cleaned")

```

### Analyze

```{r}
# 1. Average ride length by rider type
avg_ride_length <- trip_data_clean %>%
  group_by(member_casual) %>%
  summarise(avg_duration = mean(ride_length, na.rm = TRUE))

print(avg_ride_length)

# 2. Number of rides by day of week and rider type
rides_by_day <- trip_data_clean %>%
  group_by(member_casual, day_of_week) %>%
  summarise(num_rides = n(),
            avg_duration = mean(ride_length, na.rm = TRUE)) %>%
  arrange(day_of_week)

print(rides_by_day)

# 3. Monthly usage trends
rides_by_month <- trip_data_clean %>%
  mutate(month = month(started_at, label = TRUE)) %>%
  group_by(member_casual, month) %>%
  summarise(num_rides = n())

print(rides_by_month)

```
### Share

```{r Share}
# Bar chart: average ride duration
ggplot(avg_ride_length, aes(x = member_casual, y = avg_duration, fill = member_casual)) +
  geom_col() +
  labs(title = "Average Ride Duration by Rider Type",
       x = "Rider Type", y = "Avg Duration (minutes)") +
  theme_minimal()

# Line chart: monthly rides
ggplot(rides_by_month, aes(x = month, y = num_rides, color = member_casual, group = member_casual)) +
  geom_line(size=1.2) +
  labs(title = "Monthly Ride Trends",
       x = "Month", y = "Number of Rides") +
  theme_minimal()

# Heat map: rides by day of week and rider type
ggplot(rides_by_day, aes(x = day_of_week, y = member_casual, fill = num_rides)) +
  geom_tile() +
  labs(title = "Rides by Day of Week and Rider Type") +
  theme_minimal()

```
---

# Act
### Key Findings:
1. Casual riders take longer rides but ride less frequently.  
2. Annual members ride more consistently, especially during weekdays (commuting patterns).  
3. Casual riders are more active on weekends, suggesting leisure use.  

### Recommendations:
1. **Target casual riders with weekday promotions** (commuter benefits).  
2. **Offer membership discounts** for frequent weekend users.  
3. **Use digital media campaigns** highlighting cost savings of memberships vs. single passes.  

---

# Conclusion
This analysis shows clear differences in usage patterns. By leveraging these insights, Cyclistic can design targeted campaigns to **convert casual riders into annual members**.


